{"ast":null,"code":"var _jsxFileName = \"D:\\\\LocalizedServiceDiscovery\\\\front-end\\\\src\\\\Availability.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './Availability.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst daysOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\nconst Availability = () => {\n  _s();\n  const [availability, setAvailability] = useState([]);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  useEffect(() => {\n    // Fetch current availability\n    const fetchAvailability = async () => {\n      const token = localStorage.getItem('authToken');\n      const res = await fetch('http://localhost:5000/api/bookings/availability', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      const data = await res.json();\n      if (res.ok) {\n        const formattedData = daysOfWeek.map(day => {\n          const existing = data.find(d => d.day_of_week === day);\n          return {\n            day_of_week: day,\n            start_time: existing ? existing.start_time.slice(0, 5) : '09:00',\n            end_time: existing ? existing.end_time.slice(0, 5) : '17:00',\n            isEnabled: !!existing\n          };\n        });\n        setAvailability(formattedData);\n      }\n    };\n    fetchAvailability();\n  }, []);\n  const handleTimeChange = (day, field, value) => {\n    const newAvailability = availability.map(d => {\n      if (d.day_of_week === day) {\n        return {\n          ...d,\n          [field]: value\n        };\n      }\n      return d;\n    });\n    setAvailability(newAvailability);\n  };\n  const handleToggle = day => {\n    const newAvailability = availability.map(d => {\n      if (d.day_of_week === day) {\n        return {\n          ...d,\n          isEnabled: !d.isEnabled\n        };\n      }\n      return d;\n    });\n    setAvailability(newAvailability);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    const payload = availability.filter(d => d.isEnabled);\n    try {\n      const token = localStorage.getItem('authToken');\n      const res = await fetch('http://localhost:5000/api/bookings/availability', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          availability: payload\n        })\n      });\n      if (!res.ok) throw new Error('Failed to save availability');\n      setSuccess('Availability saved successfully!');\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n  if (availability.length === 0) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 43\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"availability-manager\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Manage Your Weekly Availability\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Set the hours you are available for bookings. Customers will only be able to book you during these times.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [availability.map(({\n        day_of_week,\n        start_time,\n        end_time,\n        isEnabled\n      }) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `day-row ${isEnabled ? '' : 'disabled'}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"day-toggle\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: isEnabled,\n            onChange: () => handleToggle(day_of_week)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: day_of_week\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"time-inputs\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"time\",\n            value: start_time,\n            disabled: !isEnabled,\n            onChange: e => handleTimeChange(day_of_week, 'start_time', e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"-\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"time\",\n            value: end_time,\n            disabled: !isEnabled,\n            onChange: e => handleTimeChange(day_of_week, 'end_time', e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }, this)]\n      }, day_of_week, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"form-button\",\n        children: \"Save Availability\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 27\n      }, this), success && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"success-message\",\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n};\n_s(Availability, \"LBrCppsNtm7LKMJ4UmkV7cxguV4=\");\n_c = Availability;\nexport default Availability;\nvar _c;\n$RefreshReg$(_c, \"Availability\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","daysOfWeek","Availability","_s","availability","setAvailability","error","setError","success","setSuccess","fetchAvailability","token","localStorage","getItem","res","fetch","headers","data","json","ok","formattedData","map","day","existing","find","d","day_of_week","start_time","slice","end_time","isEnabled","handleTimeChange","field","value","newAvailability","handleToggle","handleSubmit","e","preventDefault","payload","filter","method","body","JSON","stringify","Error","err","message","length","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onSubmit","type","checked","onChange","disabled","target","_c","$RefreshReg$"],"sources":["D:/LocalizedServiceDiscovery/front-end/src/Availability.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './Availability.css';\r\n\r\nconst daysOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n\r\nconst Availability = () => {\r\n    const [availability, setAvailability] = useState([]);\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState('');\r\n\r\n    useEffect(() => {\r\n        // Fetch current availability\r\n        const fetchAvailability = async () => {\r\n            const token = localStorage.getItem('authToken');\r\n            const res = await fetch('http://localhost:5000/api/bookings/availability', {\r\n                headers: { 'Authorization': `Bearer ${token}` }\r\n            });\r\n            const data = await res.json();\r\n            if (res.ok) {\r\n                 const formattedData = daysOfWeek.map(day => {\r\n                    const existing = data.find(d => d.day_of_week === day);\r\n                    return {\r\n                        day_of_week: day,\r\n                        start_time: existing ? existing.start_time.slice(0, 5) : '09:00',\r\n                        end_time: existing ? existing.end_time.slice(0, 5) : '17:00',\r\n                        isEnabled: !!existing\r\n                    };\r\n                });\r\n                setAvailability(formattedData);\r\n            }\r\n        };\r\n        fetchAvailability();\r\n    }, []);\r\n\r\n    const handleTimeChange = (day, field, value) => {\r\n        const newAvailability = availability.map(d => {\r\n            if (d.day_of_week === day) {\r\n                return { ...d, [field]: value };\r\n            }\r\n            return d;\r\n        });\r\n        setAvailability(newAvailability);\r\n    };\r\n\r\n    const handleToggle = (day) => {\r\n        const newAvailability = availability.map(d => {\r\n            if (d.day_of_week === day) {\r\n                return { ...d, isEnabled: !d.isEnabled };\r\n            }\r\n            return d;\r\n        });\r\n        setAvailability(newAvailability);\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setSuccess('');\r\n        \r\n        const payload = availability.filter(d => d.isEnabled);\r\n\r\n        try {\r\n            const token = localStorage.getItem('authToken');\r\n            const res = await fetch('http://localhost:5000/api/bookings/availability', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({ availability: payload })\r\n            });\r\n            if (!res.ok) throw new Error('Failed to save availability');\r\n            setSuccess('Availability saved successfully!');\r\n        } catch (err) {\r\n            setError(err.message);\r\n        }\r\n    };\r\n    \r\n    if (availability.length === 0) return <div>Loading...</div>;\r\n\r\n    return (\r\n        <div className=\"availability-manager\">\r\n            <h2>Manage Your Weekly Availability</h2>\r\n            <p>Set the hours you are available for bookings. Customers will only be able to book you during these times.</p>\r\n            <form onSubmit={handleSubmit}>\r\n                {availability.map(({ day_of_week, start_time, end_time, isEnabled }) => (\r\n                    <div key={day_of_week} className={`day-row ${isEnabled ? '' : 'disabled'}`}>\r\n                        <div className=\"day-toggle\">\r\n                            <input type=\"checkbox\" checked={isEnabled} onChange={() => handleToggle(day_of_week)} />\r\n                            <label>{day_of_week}</label>\r\n                        </div>\r\n                        <div className=\"time-inputs\">\r\n                            <input type=\"time\" value={start_time} disabled={!isEnabled} onChange={(e) => handleTimeChange(day_of_week, 'start_time', e.target.value)} />\r\n                            <span>-</span>\r\n                            <input type=\"time\" value={end_time} disabled={!isEnabled} onChange={(e) => handleTimeChange(day_of_week, 'end_time', e.target.value)} />\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n                <button type=\"submit\" className=\"form-button\">Save Availability</button>\r\n                {error && <p className=\"error-message\">{error}</p>}\r\n                {success && <p className=\"success-message\">{success}</p>}\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Availability;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}